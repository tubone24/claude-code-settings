---
description: エージェント使用ガイドとコンテキスト最適化
---

# エージェントオーケストレーション

## 即時エージェント使用

ユーザープロンプト不要で自動的に使用:
1. 複雑な機能リクエスト → **planner**
2. コードを書いた/修正した直後 → **code-reviewer**
3. バグ修正または新機能 → **tdd-guide**
4. アーキテクチャの決定 → **architect**
5. ドキュメント参照が必要 → **docs-lookup**
6. 大規模タスク → **orchestrator**

## 並列タスク実行

独立した操作には常に並列Task実行を使用

```markdown
# 良い例: 並列実行（コンテキスト効率が高い）
3つのエージェントを並列で起動:
1. security-reviewer: auth.tsのセキュリティ分析
2. code-reviewer: キャッシュシステムのレビュー
3. tdd-guide: utils.tsのテスト作成

# 悪い例: 不要な順次実行
まずエージェント1、次にエージェント2、次にエージェント3
```

## マルチパースペクティブ分析

複雑な問題には、分割ロールのサブエージェントを使用:
- 事実確認レビュアー
- シニアエンジニア
- セキュリティエキスパート
- 一貫性レビュアー
- 冗長性チェッカー

## コンテキスト節約のベストプラクティス

1. **snapshot -i を使う** - agent-browserで必要最小限の情報のみ取得
2. **詳細はファイル出力** - 分析結果、ログ、レポートはファイルに保存
3. **リンクで参照** - 長いドキュメントはURLを提示
4. **要約を返す** - サブエージェントからは3-5行のサマリーのみ
5. **haiku モデル活用** - 単純なタスクには軽量モデルを使用
