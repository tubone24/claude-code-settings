{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "_description": "エージェント活動の監視・ログ記録用フック",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\ntool=$(echo \"$input\" | jq -r '.tool // \"unknown\"')\nmkdir -p ~/.claude/logs\necho \"[$(date '+%H:%M:%S')] PRE  $tool\" >> ~/.claude/logs/agent-$(date '+%Y%m%d').log\necho \"$input\""
          }
        ],
        "description": "Log all tool calls"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\ntool=$(echo \"$input\" | jq -r '.tool // \"unknown\"')\necho \"[$(date '+%H:%M:%S')] POST $tool\" >> ~/.claude/logs/agent-$(date '+%Y%m%d').log\necho \"$input\""
          }
        ],
        "description": "Log tool completion"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\necho \"[$(date '+%H:%M:%S')] SESSION END\" >> ~/.claude/logs/agent-$(date '+%Y%m%d').log\necho \"---\" >> ~/.claude/logs/agent-$(date '+%Y%m%d').log\necho \"$input\""
          }
        ],
        "description": "Log session end"
      }
    ]
  }
}
